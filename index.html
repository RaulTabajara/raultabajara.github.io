<!DOCTYPE html>
<html>
<head>
	<title>turtle</title>
<style type="text/css">

#screen {
	
	width: 1280px;
	height: 720px; 
	border:solid;
	position: relative;
	margin: auto;
	background-image: url(img/cena.png);
	z-index: 0;

	
    
}

#foot {
	
	width: 120px;
	height: 200px; 
	top: 230px;
	left: 350px;
	
	position: absolute;
	background-image: url(img/foot.gif);
	z-index: 230;
	
    
}



#turtle {
	
	width: 120px;
	height: 200px; 
	top: 300px;
	left: 500px;
	z-index: 10;
	position: absolute;
	background-image: url(img/turtle.gif); 
	
    
}


</style>

</head>
<body>
<div id = screen>

<div id=foot> </div>
<div id=turtle> </div>



</div>


<script type="text/javascript">

var up = false, down = false, left= false, right=false;
var Mleft = 500, Mtop = 300;
var eposX = 350;
var eposY = 230;

	
window.document.addEventListener("keydown", controller);
window.document.addEventListener("keyup", stopController);


function turtle(){
	return document.querySelector("#turtle");
}



function controller(event){
	
	
		if (event.keyCode === 37 )
		{
			left=true;
		}

	
		if (event.keyCode === 39) 
		{
			
			right = true;
		}

		if (event.keyCode === 38) 
		{
			
			up = true;
		}

		if (event.keyCode === 40) 
		{
			
			down = true;
		}
	
		if (event.keyCode === 32 )
		{
			atack();
		}
}



 
function atack(){


	document.querySelector("#turtle").style.backgroundImage = "url(img/turtle-a.gif)";
	setTimeout(walk, 200);
	if (  Mtop - eposY < 30 && Mtop - eposY > -30){

		if (  Mleft - eposX < 10 && Mleft - eposX > -100){

		document.querySelector("#foot").style.backgroundImage = "url(img/foot-a.gif)";
		setTimeout(footBack, 500);
	}
	}
}

function footBack(){
	document.querySelector("#foot").style.backgroundImage = "url(img/foot.gif)";
}

function walk(){
	document.querySelector("#turtle").style.backgroundImage = "url(img/turtle.gif)";
}

function stopController(event){
	if (event.keyCode === 37 ){
	left=false;
	
	}

	
	if (event.keyCode === 39) {
	
	
	right = false;
	
	
	}

	if (event.keyCode === 38) {
	
	up = false;
	
	
	}

	if (event.keyCode === 40) {
	
	down = false;
	
	
	}


	}

	function move (event){
	
	

	if (left){
	turtle().style.left = (Mleft -= 5) + "px";
		}

	
	if (right){
	turtle().style.left = (Mleft += 5) + "px";
		}

	if (up){
		
	turtle().style.top = (Mtop -= 5) + "px";
		}

	if (down){
		turtle().style.top = (Mtop += 5) + "px";
		}
	
turtle().style.zIndex = (Mtop);



	}

ciclo();

function ciclo(){
	requestAnimationFrame(ciclo);
	move();
	console.log(Mtop);
		
	}

</script>
</body>
</html>